gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_title(
)
) %>%
tab_footnote(
footnote = "Users were not shown the reply tool by default",
locations = cells_column_labels(
columns = "test_group")
) %>%
tab_footnote(
footnote = "Users were shown the reply tool by default",
locations = cells_column_labels(
columns = "test_group")
)
num_jc_editors_table <- num_jc_editors %>%
gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_title(
)
) %>%
tab_footnote(
footnote = "Users were not shown the reply tool by default",
locations = cells_column_labels(
columns = "test_group")
) %>%
tab_footnote(
footnote = "Users were shown the reply tool by default",
locations = cells_column_labels(
columns = "test_group")
)
num_jc_editors_table <- num_jc_editors %>%
gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_title(
)
)
num_jc_editors_table
num_jc_editors_table <- num_jc_editors %>%
gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_title(
)
) %>%
tab_footnote(
footnote = "Users were not shown the reply tool by default",
locations = cells_stubhead(
columns = "control")
) %>%
tab_footnote(
footnote = "Users were shown the reply tool by default",
locations = cells_stubhead(
columns = "test")
)
num_jc_editors_table <- num_jc_editors %>%
gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_title(
)
) %>%
tab_footnote(
footnote = "Users were not shown the reply tool by default",
locations = cells_stubhead()
)
num_jc_editors_table
num_jc_editors_table <- num_jc_editors %>%
gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_column_spanners(
)
) %>%
tab_footnote(
footnote = "Users were not shown the reply tool by default",
locations = cells_column_spanners(spanners = "control")
)
num_jc_editors_table <- num_jc_editors %>%
gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_title(
)
) %>%
tab_footnote(
footnote = "Users were not shown the reply tool by default",
locations = cells_column_spanners()
)
num_jc_editors_table <- num_jc_editors %>%
gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_title(
)
) %>%
tab_footnote(
footnote = "Users were not shown the reply tool by default",
locations = cells_column_spanners(spanners = "control")
)
num_jc_editors_table <- num_jc_editors %>%
gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_title(
)
)
num_jc_editors_table
num_jc_editors_table <- num_jc_editors %>%
gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_title(
)
) %>%
tab_footnote(
footnote = "Users were not shown the reply tool by default",
locations = cells_row_groups(groups = "control")
)
num_jc_editors_table
num_jc_editors_table <- num_jc_editors %>%
gt() %>%
tab_header(
title = "Number of Junior Contributors that made a comment during the AB test by test group and interface"
)  %>%
cols_label(
test_group = "Test group",
editor_interface = "Editing experience",
total_users_attempt = "Number of users that attempted a comment",
total_users_complete = "Number of users that published a comment"
) %>%
tab_footnote(
footnote = "Based on a sampling rate of 6.25% for all events. Any oversampled events were removed so data for the two editor types could be directly compared",
locations = cells_title(
)
) %>%
tab_footnote(
footnote = "Users were not shown the reply tool by default",
locations = cells_row_groups(groups = "control")
) %>%
tab_footnote(
footnote = "Users were shown the reply tool by default",
locations = cells_row_groups(groups = "test")
)
num_jc_editors_table
p <-num_jc_editors %>%
group_by(test_group) %>%
summarise(total_user_complete = sum(total_users_complete)) %>%
ggplot(aes(x= test_group, y = total_user_complete, fill = test_group)) +
geom_col(position = 'dodge') +
geom_text(aes(label = paste(total_user_complete),fontface=2), vjust=1.2, size = 8, color = "white") +
labs (y = "Number of Junior Contributors",
x = "Test group",
title = "Number of junior contributors that completed a comment by test group")  +
theme_bw() +
scale_fill_brewer(name="Test group", palette="Set1")  +
theme(plot.title = element_text(hjust = 0.5, size = 20),
strip.text.x = element_text(size = 18),
axis.text.x = element_text(color = "grey20", size = 18,  hjust = .5, vjust = .5, face = "plain"),
axis.text.y = element_text(color = "grey20", size = 18, angle = 0, hjust = 1, vjust = 0, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 18, angle = 90, hjust = .5, vjust = .5, face = "plain"),
axis.title.x=element_blank(),
legend.position = "none")
p
ggsave("Figures/num_jc_editors_bygroup.png", p, width = 16, height = 8, units = "in", dpi = 300)
p <-num_jc_editors %>%
group_by(test_group) %>%
summarise(total_user_complete = sum(total_users_complete)) %>%
ggplot(aes(x= test_group, y = total_user_complete, fill = test_group)) +
geom_col(position = 'dodge') +
geom_text(aes(label = paste(total_user_complete),fontface=2), vjust=1.2, size = 8, color = "white") +
labs (y = "Number of Junior Contributors",
x = "Test group",
title = "Number of Junior Contributors that completed a comment by test group \n across all participating Wikipedias")  +
theme_bw() +
scale_fill_brewer(name="Test group", palette="Set1")  +
theme(plot.title = element_text(hjust = 0.5, size = 20),
strip.text.x = element_text(size = 18),
axis.text.x = element_text(color = "grey20", size = 18,  hjust = .5, vjust = .5, face = "plain"),
axis.text.y = element_text(color = "grey20", size = 18, angle = 0, hjust = 1, vjust = 0, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 18, angle = 90, hjust = .5, vjust = .5, face = "plain"),
axis.title.x=element_blank(),
legend.position = "none")
p
ggsave("Figures/num_jc_editors_bygroup.png", p, width = 16, height = 8, units = "in", dpi = 300)
num_jc_editors_bywiki <- reply_edit_attempts %>%
filter(experience_level == 'Junior Contributor',
is_oversample == 'false' ) %>%
group_by(wiki,test_group)  %>%
summarise(total_users_complete = n_distinct(user_id[edit_success == 'Complete']))
num_jc_editors_bywiki_cap <- format_caption(figure_caps, "Number of junior contributors by wiki")
num_jc_editors_bywiki <- reply_edit_attempts %>%
filter(experience_level == 'Junior Contributor',
is_oversample == 'false' ) %>%
group_by(wiki,test_group)  %>%
summarise(total_users_complete = n_distinct(user_id[edit_success == 'Complete']))
# Plot edit completion rates for each user on each wiki
p <- num_jc_editors_bywiki %>%
ggplot(aes(x= test_group, y = total_users_complete, fill = test_group)) +
geom_col(position = 'dodge') +
geom_text(aes(label = paste(total_users_complete)), vjust=-0.5) +
facet_wrap( ~ wiki) +
scale_y_continuous() +
labs (y = "Number of Junior Contributors ",
title = "Number of Junior Contributors that published a comment \n by participating Wikipedia and test group") +
theme_bw() +
scale_fill_brewer(name="Editing experience", palette="Set1")  +
theme(
plot.title = element_text(hjust = 0.5),
text = element_text(size=16),
axis.title.x=element_blank(),
axis.text.x=element_blank(),
legend.position = "bottom")
p
ggsave("Figures/num_jc_editors_bywiki_plot.png", p, width = 16, height = 8, units = "in", dpi = 300)
# Loads retention data
week_one_retention <-
read.csv(
file = 'Data/week_one_retention_rate.csv',
header = TRUE,
sep = "\t",
stringsAsFactors = FALSE
)
week_two_retention <-
read.csv(
file = 'Data/week_two_retention_rate.csv',
header = TRUE,
sep = "\t",
stringsAsFactors = FALSE
)
# Join all the data
retention_rates_two <- inner_join(week_one_retention, week_two_retention)
# Loads retention data
week_one_retention <-
read.csv(
file = 'Data/week_one_retention_rate.csv',
header = TRUE,
sep = "\t",
stringsAsFactors = FALSE
)
week_two_retention <-
read.csv(
file = 'Data/week_two_retention_rate.csv',
header = TRUE,
sep = "\t",
stringsAsFactors = FALSE
)
# Join all the data
retention_rates_two <- inner_join(week_one_retention, week_two_retention)
#clarify levels and labels for factor variables
retention_rates_two$editing_interface <-
factor(
retention_rates_two$editing_interface,
levels = c("non-reply-tool", "reply-tool"),
labels = c("Page editing", "Reply tool")
)
retention_rates_two$experience_level <-
factor(retention_rates_two$experience_level,
levels = c( "non-junior", "junior"),
labels = c("Non-Junior Contributor", "Junior Contributor")
)
# Restrict to just Junior Contributors
retention_rates_jc_table <- retention_rates_two %>%
filter(experience_level == 'Junior Contributor') %>%
group_by(editing_interface) %>%
summarise(week_1 = paste(round((first_week_retention_rate * 100), 2), "%"),
week_2= paste(round((two_week_retention_rate * 100), 2), "%"))  %>%
gt() %>%
tab_header(
title = "Junior contributors retention rate"
)  %>%
cols_label(
editing_interface = "Editing experience",
week_1 = "Week 1 (2-8 days)",
week_2 = "Week 2 (9-15 days)"
) %>%
tab_footnote(
footnote = "Defined as percent of contributors that made a comment during the AB test and returned to make another comment.",
locations = cells_title(
)
) %>%
tab_footnote(
footnote = "Sampling rate for Non-Reply Tool events is 6.25%",
locations = cells_column_labels(
columns = 'editing_interface')
)   %>%
tab_footnote(
footnote = "Defined as days since first comment during the AB test.",
locations = cells_column_labels(
columns = c('week_1', 'week_2'))
)
retention_rates_jc_table
# Plot edit completion rates for each user on each wiki
p <- retention_rates_two %>%
filter(experience_level == 'Junior Contributor') %>%
gather("week", "retention_rate", 3:4) %>%
mutate(week = factor(week,
levels = c("first_week_retention_rate", "two_week_retention_rate"),
labels = c("week 1", "week 2")))  %>%
ggplot(aes(x= editing_interface, y = retention_rate*100, fill = editing_interface)) +
geom_col(position = 'dodge') +
geom_text(aes(label = paste(round(retention_rate*100, 2), "%"), fontface=2), vjust=1.2, size = 8, color = "white") +
facet_wrap(~ week) +
scale_y_continuous() +
labs (y = "Percent of Junior Contributors ",
title = "Junior contributors retention rate")  +
theme_bw() +
scale_fill_brewer(name="Editing experience", palette="Set1")  +
theme(
plot.title = element_text(hjust = 0.5, size = 20),
axis.text.y = element_text(color = "grey20", size = 18, angle = 0, hjust = 1, vjust = 0, face = "plain"),
axis.title.y = element_text(color = "grey20", size = 18, angle = 90, hjust = .5, vjust = .5, face = "plain"),
axis.title.x=element_blank(),
axis.text.x=element_blank(),
strip.text.x = element_text(size = 18),
legend.position = "bottom",
legend.title = element_text(size = 18),
legend.text = element_text(size = 18))
p
ggsave("Figures/jc_retention_rate.png", p, width = 16, height = 8, units = "in", dpi = 300)
retention_rates_byexp_cap <- format_caption(figure_caps, "Retention of all contributors by experience level")
# Plot edit completion rates for each user on each wiki
p <-  retention_rates_two %>%
gather("week", "retention_rate", 3:4) %>%
mutate(week = factor(week,
levels = c("first_week_retention_rate", "two_week_retention_rate"),
labels = c("week 1", "week 2")))  %>%
ggplot(aes(x= editing_interface, y = retention_rate*100, fill = editing_interface)) +
geom_col(position = 'dodge') +
geom_text(aes(label = paste(round(retention_rate*100, 2), "%")), vjust=-0.5) +
facet_grid(experience_level ~ week ) +
scale_y_continuous() +
labs (y = "Percent of contributors ",
title = "Contributors retention rate by experience level")  +
theme_bw() +
scale_fill_brewer(name="Editing experience", palette="Set1")  +
theme(
plot.title = element_text(hjust = 0.5, size = 20),
axis.text.y = element_text(color = "grey20", size = 18, angle = 0, hjust = 1, vjust = 0, face = "plain"),
axis.title.x=element_blank(),
axis.text.x=element_blank(),
strip.text.x = element_text(size = 18),
strip.text.y = element_text(size = 18),
legend.position = "bottom",
legend.title = element_text(size = 18),
legend.text = element_text(size = 18)
)
p
ggsave("Figures/retention_rate_byexperience.png", p, width = 16, height = 8, units = "in", dpi = 300)
library(knitr)
library(kableExtra)
library(zeallot)
library(tidyverse)
library(dplyr)
# Tables:
library(gt)
library(gtsummary)
# Modeling:
library(lme4)
library(brms)
library(tidybayes)
set.seed(5)
if (!"printr" %in% installed.packages()[, "Package"]) {
install.packages("printr", type = "source", repos = c("Yihui Xie" = "http://yihui.name/xran", CRAN = "http://cran.rstudio.com"))
} else {
loadNamespace("printr")
}
is_html <- function() {
if (length(opts_knit$get("rmarkdown.pandoc.to")) > 0) {
return(opts_knit$get("rmarkdown.pandoc.to") == "html")
} else {
return(FALSE)
}
}
if (is_html()) {
options(knitr.table.format = "html")
} else {
options(knitr.table.format = "latex")
}
opts_chunk$set(
echo = is_html(), warning = FALSE, message = FALSE,
out.width='\\textwidth', dev = 'png', fig.ext = 'png',
dpi = ifelse(is_html(), 150, 300)
)
path <- function(x) {
if (grepl("docs", getwd(), fixed = TRUE)) {
return(file.path("..", x))
} else {
return(x)
}
}
# Plot edit completion rates for each user on each wiki
p <-  retention_rates_two %>%
gather("week", "retention_rate", 3:4) %>%
mutate(week = factor(week,
levels = c("first_week_retention_rate", "two_week_retention_rate"),
labels = c("week 1", "week 2")))  %>%
ggplot(aes(x= editing_interface, y = retention_rate*100, fill = editing_interface)) +
geom_col(position = 'dodge') +
geom_text(aes(label = paste(round(retention_rate*100, 2), "%"), fontface=2), vjust=1.2, size = 8, color = "white") +
facet_grid(experience_level ~ week ) +
scale_y_continuous() +
labs (y = "Percent of contributors ",
title = "Contributors retention rate by experience level")  +
theme_bw() +
scale_fill_brewer(name="Editing experience", palette="Set1")  +
theme(
plot.title = element_text(hjust = 0.5, size = 20),
axis.text.y = element_text(color = "grey20", size = 18, angle = 0, hjust = 1, vjust = 0, face = "plain"),
axis.title.x=element_blank(),
axis.text.x=element_blank(),
strip.text.x = element_text(size = 18),
strip.text.y = element_text(size = 18),
legend.position = "bottom",
legend.title = element_text(size = 18),
legend.text = element_text(size = 18)
)
p
ggsave("Figures/retention_rate_byexperience.png", p, width = 16, height = 8, units = "in", dpi = 300)
